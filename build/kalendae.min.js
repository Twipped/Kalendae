/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2012 Jarvis Badgley (chipersoft@gmail.com)         *
 *	http://github.com/ChiperSoft/Kalendae                           *
 *	Version 0.2                                                     *
 ********************************************************************/

(function(){var k,m=function(a,c){a instanceof Element||"string"===typeof a||(c=a);var b=this,d=b.classes,e=b.settings=f.merge(b.defaults,{attachTo:a},c||{}),u=b.container=f.make("div",{"class":d.container}),m=b.calendars=[],q=h().day(e.weekStart),n,s=[],j,g,t;j=[];var k;g=0;n=e.months;f.isIE8()&&f.addClassName(u,"ie8");for(g=7;g--;)s.push(q.format("ddd").substr(0,e.columnHeaderLength)),q.add("days",1);z(b);if("object"===typeof e.subscribe)for(g in e.subscribe)e.subscribe.hasOwnProperty(g)&&b.subscribe(g,
e.subscribe[g]);b._sel=[];e.selected&&b.setSelected(e.selected,!1);n=e.viewStartDate?h(e.viewStartDate,e.format):0<b._sel.length?h(b._sel[0]):h();b.viewStartDate=n.date(1);if((n={past:e.months-1,"today-past":e.months-1,any:2<e.months?Math.floor(e.months/2):0,"today-future":0,future:0}[this.settings.direction])&&h().month()==h(b.viewStartDate).month())b.viewStartDate=h(b.viewStartDate).subtract({M:n}).date(1);if("function"===typeof e.blackout)b.blackout=e.blackout;else if(e.blackout){var x=v(e.blackout,
e.parseSplitDelimiter);b.blackout=function(a){a=h(a).yearDay();if(1>a||!b._sel||1>b._sel.length)return!1;for(var c=x.length;c--;)if(x[c].yearDay()===a)return!0;return!1}}else b.blackout=function(){return!1};b.direction=b.directions[e.direction]?b.directions[e.direction]:b.directions.any;for(n=Math.max(e.months,1);n--;){j=f.make("div",{"class":d.calendar},u);j.setAttribute("data-cal-index",n);1<e.months&&(n==Math.max(e.months-1,1)?f.addClassName(j,d.monthFirst):0===n?f.addClassName(j,d.monthLast):
f.addClassName(j,d.monthMiddle));g=f.make("div",{"class":d.title},j);f.make("a",{"class":d.previousYear},g);f.make("a",{"class":d.previousMonth},g);f.make("a",{"class":d.nextYear},g);f.make("a",{"class":d.nextMonth},g);q=f.make("span",{"class":d.caption},g);t=f.make("div",{"class":d.header},j);g=0;do k=f.make("span",{},t),k.innerHTML=s[g];while(7>++g);t=f.make("div",{"class":d.days},j);g=0;for(j=[];42>g++;)j.push(f.make("span",{},t));m.push({caption:q,days:j});n&&f.make("div",{"class":d.monthSeparator},
u)}b.draw();f.addEvent(u,"mousedown",function(a,c){var g;if(f.hasClassName(c,d.nextMonth))!b.disableNext&&!1!==b.publish("view-changed",b,["next-month"])&&(b.viewStartDate.add("months",1),b.draw());else if(f.hasClassName(c,d.previousMonth))!b.disablePreviousMonth&&!1!==b.publish("view-changed",b,["previous-month"])&&(b.viewStartDate.subtract("months",1),b.draw());else if(f.hasClassName(c,d.nextYear))!b.disableNext&&!1!==b.publish("view-changed",b,["next-year"])&&(b.viewStartDate.add("years",1),b.draw());
else if(f.hasClassName(c,d.previousYear))!b.disablePreviousMonth&&!1!==b.publish("view-changed",b,["previous-year"])&&(b.viewStartDate.subtract("years",1),b.draw());else if(f.hasClassName(c.parentNode,d.days)&&f.hasClassName(c,d.dayActive)&&(g=c.getAttribute("data-date")))if(g=h(g,e.dayAttributeFormat).hours(12),!1!==b.publish("date-clicked",b,[g]))switch(e.mode){case "multiple":b.addSelected(g)||b.removeSelected(g);break;case "range":b.addSelected(g);break;default:b.addSelected(g)}return!1});(e.attachTo=
f.$(e.attachTo))&&e.attachTo.appendChild(u)};m.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,blackout:null,selected:null,mode:"single",format:null,subscribe:null,columnHeaderLength:2,titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",
monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",dayOutOfMonth:"k-out-of-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",
disableNextYear:"k-disable-next-year-btn"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(a){return h(a).yearDay()>=k.yearDay()},"today-past":function(a){return h(a).yearDay()>k.yearDay()},any:function(){return!1},"today-future":function(a){return h(a).yearDay()<k.yearDay()},future:function(a){return h(a).yearDay()<=k.yearDay()}},getSelectedAsDates:function(){for(var a=[],c=0,b=this._sel.length;c<b;c++)a.push(this._sel[c].nativeDate());
return a},getSelectedAsText:function(a){for(var c=[],b=0,d=this._sel.length;b<d;b++)c.push(this._sel[b].format(a||this.settings.format||"YYYY-MM-DD"));return c},getSelectedRaw:function(){for(var a=[],c=0,b=this._sel.length;c<b;c++)a.push(h(this._sel[c]));return a},getSelected:function(a){a=this.getSelectedAsText(a);switch(this.settings.mode){case "range":return a.splice(2),a.join(this.settings.rangeDelimiter);case "multiple":return a.join(this.settings.multipleDelimiter);default:return a[0]}},isSelected:function(a){a=
h(a).yearDay();if(1>a||!this._sel||1>this._sel.length)return!1;switch(this.settings.mode){case "range":var c=this._sel[0]?this._sel[0].yearDay():0,b=this._sel[1]?this._sel[1].yearDay():0;return c===a||b===a?1:!c||!b?0:a>c&&a<b||c<b&&a<c&&a>b?-1:!1;case "multiple":for(c=this._sel.length;c--;)if(this._sel[c].yearDay()===a)return!0;return!1;default:return this._sel[0]&&this._sel[0].yearDay()===a}},setSelected:function(a,c){this._sel=v(a,this.settings.parseSplitDelimiter,this.settings.format);this._sel.sort(function(a,
c){return a.yearDay()-c.yearDay()});!1!==c&&this.draw()},addSelected:function(a,c){a=h(a).hours(12);switch(this.settings.mode){case "multiple":if(this.isSelected(a))return!1;this._sel.push(a);break;case "range":1!==this._sel.length?this._sel=[a]:a.yearDay()>this._sel[0].yearDay()?this._sel[1]=a:this._sel=[a,this._sel[0]];break;default:this._sel=[a]}this._sel.sort(function(a,c){return a.yearDay()-c.yearDay()});this.publish("change",this);!1!==c&&this.draw();return!0},removeSelected:function(a,c){for(var a=
h(a).yearDay(),b=this._sel.length;b--;)if(this._sel[b].yearDay()===a)return this._sel.splice(b,1),this.publish("change",this),!1!==c&&this.draw(),!0;return!1},draw:function(){var a=h(this.viewStartDate).hours(12),c,b=this.classes,d,e,u,m=0,q,n=0,s,j=this.settings;q=this.calendars.length;do{c=h(a).date(1);c.day(c.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);d=this.calendars[m];d.caption.innerHTML=a.format(this.settings.titleFormat);n=0;do e=d.days[n],u=[],(s=this.isSelected(c))&&
u.push({"-1":b.dayInRange,1:b.daySelected,"true":b.daySelected}[s]),c.month()!=a.month()?u.push(b.dayOutOfMonth):(!this.blackout(c)&&!this.direction(c)||0<s)&&u.push(b.dayActive),c.yearDay()===k.yearDay()&&u.push(b.dayToday),s=c.format(this.settings.dayAttributeFormat),j.dateClassMap[s]&&u.push(j.dateClassMap[s]),e.innerHTML=c.format(j.dayNumberFormat),e.className=u.join(" "),e.setAttribute("data-date",s),c.add("days",1);while(42>++n);a.add("months",1)}while(++m<q);if(j.directionScrolling){c=-h().diff(a,
"months");if("today-past"===j.direction||"past"===j.direction)0>=c?(this.disableNextMonth=!1,f.removeClassName(this.container,b.disableNextMonth)):(this.disableNextMonth=!0,f.addClassName(this.container,b.disableNextMonth));else if("today-future"===j.direction||"future"===j.direction)c>j.months?(this.disablePreviousMonth=!1,f.removeClassName(this.container,b.disablePreviousMonth)):(this.disablePreviousMonth=!0,f.addClassName(this.container,b.disablePreviousMonth));if("today-past"===j.direction||"past"===
j.direction)0>a.add({Y:1}).diff(h(),"years")?(this.disableNextYear=!1,f.removeClassName(this.container,b.disableNextYear)):(this.disableNextYear=!0,f.addClassName(this.container,b.disableNextYear));else if("today-future"===j.direction||"future"===j.direction)0<a.subtract({Y:1}).diff(h(),"years")?(this.disablePreviousYear=!1,f.removeClassName(this.container,b.disablePreviousYear)):(this.disablePreviousYear=!0,f.addClassName(this.container,b.disablePreviousYear))}}};var v=function(a,c,b){var d=[];"string"===
typeof a?a=a.split(c):f.isArray(a)||(a=[a]);c=a.length;i=0;do a[i]&&d.push(h(a[i],b).hours(12));while(++i<c);return d};window.Kalendae=m;var f=m.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},$:function(a){return"string"==typeof a?document.getElementById(a):a},$$:function(a){return document.querySelectorAll(a)},make:function(a,c,b){var d,a=document.createElement(a);if(c)for(d in c)c.hasOwnProperty(d)&&
a.setAttribute(d,c[d]);b&&b.appendChild(a);return a},isVisible:function(a){return 0<a.offsetWidth||0<a.offsetHeight},getStyle:function(a,c){var b;a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=window.getComputedStyle(a,null)[c]);return b},domReady:function(a){/in/.test(document.readyState)?setTimeout(function(){f.domReady(a)},9):a()},addEvent:function(a,c,b){var d=function(c){var c=c||window.event,d=b.apply(a,[c,c.target||c.srcElement]);!1===d&&(c.preventDefault?c.preventDefault():
(c.returnValue=!1,c.cancelBubble=!0));return d};a.attachEvent?a.attachEvent("on"+c,d):a.addEventListener(c,d,!1);return d},removeEvent:function(a,c,b){a.detachEvent?a.detachEvent("on"+c,b):a.removeEventListener(c,b,!1)},hasClassName:function(a,c){if(!(a=f.$(a)))return!1;var b=a.className;return 0<b.length&&(b==c||RegExp("(^|\\s)"+c+"(\\s|$)").test(b))},addClassName:function(a,c){if((a=f.$(a))&&!f.hasClassName(a,c))a.className+=(a.className?" ":"")+c},removeClassName:function(a,c){if(a=f.$(a))a.className=
f.trimString(a.className.replace(RegExp("(^|\\s+)"+c+"(\\s+|$)")," "))},isFixed:function(a){do if("fixed"===f.getStyle(a,"position"))return!0;while(a=a.offsetParent);return!1},getPosition:function(a,c){var b=a.offsetLeft,d=a.offsetTop,e={};if(!c)for(;a=a.offsetParent;)b+=a.offsetLeft,d+=a.offsetTop;e[0]=e.left=b;e[1]=e.top=d;return e},getHeight:function(a){return a.offsetHeight||a.scrollHeight},getWidth:function(a){return a.offsetWidth||a.scrollWidth},trimString:function(a){return a.replace(/^\s+/,
"").replace(/\s+$/,"")},merge:function(){for(var a=!0===arguments[0],c={},b=a?1:0;b<arguments.length;b++){var d=c,e=arguments[b];if("object"===typeof e){var f=void 0;for(f in e)e.hasOwnProperty(f)&&(a&&"object"===typeof d[f]&&"object"===typeof e[f]?_update(d[f],e[f]):d[f]=e[f])}}return c},isArray:function(a){return!(!a||!a.length||0===a.length||"object"!==typeof a||!a.constructor||a.nodeType||a.item)}};m.util.domReady(function(){for(var a=f.$$(".auto-kal"),c=a.length,b;c--;)b=a[c],"INPUT"===b.tagName?
new m.Input(b):new m({attachTo:b})});m.Input=function(a,c){var b=this.input=f.$(a),d;if(!b||"INPUT"!==b.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var e=this,h=e.classes;opts=e.settings=f.merge(e.defaults,c);opts.attachTo=window.document.body;opts.selected?d=!0:opts.selected=b.value;m.call(e,opts);if(opts.closeButton){var k=f.make("a",{"class":h.closeButton},e.container);f.addEvent(k,"click",function(){b.blur()})}d&&(b.value=e.getSelected());
d=e.container;var q=!1;d.style.display="none";f.addClassName(d,h.positioned);f.addEvent(d,"mousedown",function(){q=true});f.addEvent(window.document,"mousedown",function(){q=false});f.addEvent(b,"focus",function(){e.setSelected(this.value);e.show()});f.addEvent(b,"blur",function(){if(q){q=false;b.focus()}else e.hide()});f.addEvent(b,"keyup",function(){e.setSelected(this.value)});e.subscribe("change",function(){b.value=e.getSelected()})};m.Input.prototype=f.merge(m.prototype,{defaults:f.merge(m.prototype.defaults,
{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:f.merge(m.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var a=this.container,c=a.style,b=this.input,d=f.getPosition(b);c.display="";switch(opts.side){case "left":c.left=d.left-f.getWidth(a)+this.settings.offsetLeft+"px";c.top=d.top+this.settings.offsetTop+"px";break;case "right":c.left=d.left+f.getWidth(b)+"px";c.top=d.top+this.settings.offsetTop+"px";break;case "top":c.left=
d.left+this.settings.offsetLeft+"px";c.top=d.top-f.getHeight(a)+this.settings.offsetTop+"px";break;default:c.left=d.left+this.settings.offsetLeft+"px",c.top=d.top+f.getHeight(b)+this.settings.offsetTop+"px"}c.position=f.isFixed(b)?"fixed":"absolute"},hide:function(){this.container.style.display="none"}});var z=function(a){a||(a=this);var c=a.c_||{};a.publish=function(a,d,e){for(var f=(a=c[a])?a.length:0,h;f--;)if(h=a[f].apply(d,e||[]),"boolean"===typeof h)return h};a.subscribe=function(a,d,f){c[a]||
(c[a]=[]);f?c[a].push(d):c[a].unshift(d);return[a,d]};a.unsubscribe=function(a){for(var d=c[a[0]],a=a[1],f=d?d.length:0;f--;)d[f]===a&&d.splice(f,1)}},h=m.moment=function(a,c){function b(a,b){this._d=a;this._isUTC=!!b}function d(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function f(b,c,d,e){var g="string"===typeof c,l=g?{}:c;g&&e&&(l[c]=+e);c=(l.ms||l.milliseconds||0)+1E3*(l.s||l.seconds||0)+6E4*(l.m||l.minutes||0)+36E5*(l.h||l.hours||0);e=(l.d||l.days||0)+7*(l.w||l.weeks||0);l=(l.M||l.months||
0)+12*(l.y||l.years||0);c&&b.setTime(+b+c*d);e&&b.setDate(b.getDate()+e*d);l&&(c=b.getDate(),b.setDate(1),b.setMonth(b.getMonth()+l*d),b.setDate(Math.min((new a(b.getFullYear(),b.getMonth()+1,0)).getDate(),c)));return b}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function m(b){return new a(b[0],b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0)}function q(b,c){function f(c){var y;switch(c){case "M":return e+1;case "Mo":return e+1+p(e+1);case "MM":return d(e+1,2);case "MMM":return g.monthsShort[e];
case "MMMM":return g.months[e];case "D":return h;case "Do":return h+p(h);case "DD":return d(h,2);case "DDD":return c=new a(l,e,h),y=new a(l,0,1),~~((c-y)/864E5+1.5);case "DDDo":return c=f("DDD"),c+p(c);case "DDDD":return d(f("DDD"),3);case "d":return j;case "do":return j+p(j);case "ddd":return g.weekdaysShort[j];case "dddd":return g.weekdays[j];case "w":return c=new a(l,e,h-j+5),y=new a(c.getFullYear(),0,4),~~((c-y)/864E5/7+1.5);case "wo":return c=f("w"),c+p(c);case "ww":return d(f("w"),2);case "YY":return d(l%
100,2);case "YYYY":return l;case "a":return 11<r?o.pm:o.am;case "A":return 11<r?o.PM:o.AM;case "H":return r;case "HH":return d(r,2);case "h":return r%12||12;case "hh":return d(r%12||12,2);case "m":return m;case "mm":return d(m,2);case "s":return n;case "ss":return d(n,2);case "zz":case "z":return(b._d.toString().match(D)||[""])[0].replace(E,"");case "Z":return(0>k?"-":"+")+d(~~(Math.abs(k)/60),2)+":"+d(~~(Math.abs(k)%60),2);case "ZZ":return(0>k?"-":"+")+d(~~(10*Math.abs(k)/6),4);case "L":case "LL":case "LLL":case "LLLL":case "LT":return q(b,
g.longDateFormat[c]);default:return c.replace(/(^\[)|(\\)|\]$/g,"")}}var e=b.month(),h=b.date(),l=b.year(),j=b.day(),r=b.hours(),m=b.minutes(),n=b.seconds(),k=-b.zone(),p=g.ordinal,o=g.meridiem;return c.replace(F,f)}function n(b,c){var d=[0,0,1,0,0,0,0],f=0,e=0,h=!1,j=b.match(A),r=c.match(G),n=Math.min(j.length,r.length),k,q;for(k=0;k<n;k++){var p=j[k],o=void 0;switch(r[k]){case "M":case "MM":d[1]=~~p-1;break;case "MMM":case "MMMM":for(o=0;12>o;o++)if(g.monthsParse[o].test(p)){d[1]=o;break}break;
case "D":case "DD":case "DDD":case "DDDD":d[2]=~~p;break;case "YY":p=~~p;d[0]=p+(70<p?1900:2E3);break;case "YYYY":d[0]=~~Math.abs(p);break;case "a":case "A":q="pm"===p.toLowerCase();break;case "H":case "HH":case "h":case "hh":d[3]=~~p;break;case "m":case "mm":d[4]=~~p;break;case "s":case "ss":d[5]=~~p;break;case "Z":case "ZZ":h=!0,(o=(p||"").match(H))&&o[1]&&(f=~~o[1]),o&&o[2]&&(e=~~o[2]),o&&"+"===o[0]&&(f=-f,e=-e)}}q&&12>d[3]&&(d[3]+=12);!1===q&&12===d[3]&&(d[3]=0);d[3]+=f;d[4]+=e;return h?new a(a.UTC.apply({},
d)):m(d)}function s(a,b,c){var d=g.relativeTime[a];return"function"===typeof d?d(b||1,!!c,a):d.replace(/%d/i,b||1)}function j(a,b){g.fn[a]=function(a){var c=this._isUTC?"UTC":"";return"undefined"!==typeof a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}var g,t=Math.round,k={},x="undefined"!==typeof module,v="months,monthsShort,monthsParse,weekdays,weekdaysShort,longDateFormat,calendar,relativeTime,ordinal,meridiem".split(","),w,z=/^\/?Date\((\-?\d+)/i,F=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|zz?|ZZ?|LT|LL?L?L?)/g,
E=/[^A-Z]/g,D=/\([A-Za-z ]+\)|:[0-9]{2} [A-Z]{3} /g,G=/(\\)?(MM?M?M?|dd?d?d|DD?D?D?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|ZZ?|T)/g,A=/(\\)?([0-9]+|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+|([\+\-]\d\d:?\d\d))/gi,I=/\d{4}.\d\d.\d\d(T(\d\d(.\d\d(.\d\d)?)?)?([\+\-]\d\d:?\d\d)?)?/,C=[["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],H=/([\+\-]|\d\d)/gi,B="Month,Date,Hours,Minutes,Seconds,Milliseconds".split(",");g=function(d,f){if(null===d||""===d)return null;var e;if(d&&d._d instanceof
a)e=new a(+d._d);else if(f)if(h(f)){var g=d.match(A),j=99,l,k,r;for(l=0;l<f.length;l++){k=n(d,f[l]);r=g;for(var s=q(new b(k),f[l]).match(A),t=Math.min(r.length,s.length),v=Math.abs(r.length-s.length),p=0,o=void 0,o=0;o<t;o++)~~r[o]!==~~s[o]&&p++;r=p+v;r<j&&(j=r,e=k)}}else e=n(d,f);else if(e=z.exec(d),d===c)e=new a;else if(e)e=new a(+e[1]);else if(d instanceof a)e=d;else if(h(d))e=m(d);else if("string"===typeof d)if(e="YYYY-MM-DDT",I.exec(d)){for(g=0;3>g;g++)if(C[g][1].exec(d)){e+=C[g][0];break}e=
n(d,e+"Z")}else e=new a(d);else e=new a(d);return new b(e)};g.utc=function(c,d){return h(c)?new b(new a(a.UTC.apply({},c)),!0):d&&c?g(c+" 0",d+" Z").utc():g(c).utc()};g.humanizeDuration=function(a,b,c){var a=+a,d=g.relativeTime;switch(b){case "seconds":a*=1E3;break;case "minutes":a*=6E4;break;case "hours":a*=36E5;break;case "days":a*=864E5;break;case "weeks":a*=6048E5;break;case "months":a*=2592E6;break;case "years":a*=31536E6;break;default:c=!!b}var b=!c,e=t(Math.abs(a)/1E3),f=t(e/60),h=t(f/60),
j=t(h/24),k=t(j/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===h&&["h"]||22>h&&["hh",h]||1===j&&["d"]||25>=j&&["dd",j]||45>=j&&["M"]||345>j&&["MM",t(j/30)]||1===k&&["y"]||["yy",k];e[2]=b;b=s.apply({},e);return c?(0>=a?d.past:d.future).replace(/%s/i,b):b};g.version="1.5.0";g.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";g.lang=function(a,b){var c,d;d=[];if(b){for(c=0;12>c;c++)d[c]=RegExp("^"+b.months[c]+"|^"+b.monthsShort[c].replace(".",""),"i");b.monthsParse=b.monthsParse||d;k[a]=b}if(k[a])for(c=
0;c<v.length;c++)d=v[c],g[d]=k[a][d]||g[d];else x&&(c=require("./lang/"+a),g.lang(a,c))};g.lang("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},
meridiem:{AM:"AM",am:"am",PM:"PM",pm:"pm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});g.isMoment=
function(a){return a instanceof b};g.fn=b.prototype={clone:function(){return g(this)},valueOf:function(){return+this._d},"native":function(){return this._d},toString:function(){return this._d.toString()},toDate:function(){return this._d},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return q(this,a?a:g.defaultFormat)},add:function(a,b){this._d=f(this._d,a,1,b);return this},subtract:function(a,b){this._d=f(this._d,a,-1,b);return this},diff:function(a,
b,c){var a=g(a),d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month(),a=this.date()-a.date(),b="months"===b?12*e+f+a/30:"years"===b?e+f/12:"seconds"===b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d;return c?b:t(b)},from:function(a,b){return g.humanizeDuration(this.diff(a),!b)},fromNow:function(a){return this.from(g(),a)},calendar:function(){var a=this.diff(g().sod(),"days",!0),b=g.calendar,c=b.sameElse,a=-6>a?c:-1>a?
b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<g([this.year()]).zone()||this.zone()<g([this.year(),5]).zone()},day:function(a){var b=this._d.getDay();return"undefined"===typeof a?b:this.add({d:a-b})},sod:function(){return this.clone().hours(0).minutes(0).seconds(0).milliseconds(0)},eod:function(){return this.sod().add({d:1,
ms:-1})},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return this.clone().month(this.month()+1).date(0).date()}};for(w=0;w<B.length;w++)j(B[w].toLowerCase(),B[w]);j("year","FullYear");return g}(Date);h.fn.stripTime=function(){this._d=new Date(864E5*Math.floor(this._d.valueOf()/864E5));return this};h.fn.yearDay=function(a){var c=Math.floor(this._d/864E5);return"undefined"===typeof a?c:this.add({d:a-c})};k=h().stripTime();"undefined"!==typeof jQuery&&(jQuery.fn.kalendae=
function(a){this.each(function(c,b){"INPUT"===b.tagName?$(b).data("kalendae",new m.Input(b,a)):$(b).data("kalendae",new m($.extend({},{attachTo:b},a)))});return this})})();
