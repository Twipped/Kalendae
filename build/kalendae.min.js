/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2013-2020 Jocelyn Badgley (joc@twipped.com)        *
 *	http://github.com/Twipped/Kalendae                              *
 *	Version 1.0.0                                                   *
 ********************************************************************/
!function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("moment")):window.Kalendae=e()}(function(D){function k(){return w.moment().startOf("day").yearDay()}var w=function(t,e){if("function"==typeof document.addEventListener||x.isIE8()){var a=!1;try{a=t instanceof Element}catch(e){a=!!t&&1===a.nodeType}a||"string"==typeof t||(e=t);var s,n,i,r,o,d,l,u,h,c=this,f=c.classes,m=c.settings=x.merge(c.defaults,{attachTo:t},e||{}),y=c.container=x.make("div",{class:f.container}),v=c.calendars=[],p=D().day(m.weekStart),g=[],b=[],k=0,w=m.months;for(x.isIE8()&&x.addClassName(y,"ie8"),k=7;k--;)g.push(p.format(m.columnHeaderFormat)),p.add(1,"days");if(C(c),"object"==typeof m.subscribe)for(k in m.subscribe)m.subscribe.hasOwnProperty(k)&&c.subscribe(k,m.subscribe[k]);s=m.viewStartDate?D(m.viewStartDate,m.format):D(),c.viewStartDate=s.date(1),m.endDate&&(n=D(m.endDate,m.format),c.endDate=n),c._sel=[],m.selected&&(c.setSelected(m.selected,!1),c.viewStartDate=D(c._sel[0]));var S={past:m.months-1,"today-past":m.months-1,any:2<m.months?Math.floor(m.months/2):0,"today-future":0,future:0}[this.settings.direction];if(S&&D().month()==D(c.viewStartDate).month()&&(c.viewStartDate=D(c.viewStartDate).subtract({M:S}).date(1)),c.defaultView=D(c.viewStartDate),"function"==typeof m.blackout)c.blackout=m.blackout;else if(m.blackout){var N=M(m.blackout,m.parseSplitDelimiter,m.format);c.blackout=function(e){if((e=D(e).startOf("day").yearDay())<1||!c._sel)return!1;for(var t=N.length;t--;)if(N[t].startOf("day").yearDay()===e)return!0;return!1}}else c.blackout=function(){return!1};for(c.direction=c.directions[m.direction]?c.directions[m.direction]:c.directions.any,w=Math.max(m.months,1);w--;){for((i=x.make("div",{class:f.calendar},y)).setAttribute("data-cal-index",w),1<m.months&&(w==Math.max(m.months-1,1)?x.addClassName(i,f.monthFirst):0===w?x.addClassName(i,f.monthLast):x.addClassName(i,f.monthMiddle)),r=x.make("div",{class:f.title},i),m.useYearNav||x.addClassName(r,f.disableYearNav),x.make("a",{class:f.previousYear},r),x.make("a",{class:f.previousMonth},r),x.make("a",{class:f.nextYear},r),x.make("a",{class:f.nextMonth},r),o=x.make("div",{class:f.caption},r),x.make("div",{class:f.captionMonth},o),x.make("div",{class:f.captionYear},o),d=x.make("div",{class:f.header+" "+(1==m.dayHeaderClickable?f.dayActive:"")},i),k=0;h=x.make("span",{"data-day":k},d),1==m.dayHeaderClickable&&"multiple"==m.mode&&(h.addEventListener("mouseover",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),0<daysToHover.length)for(var a=0;a<daysToHover.length;a++)x.hasClassName(daysToHover[a],f.dayActive)&&x.addClassName(daysToHover[a],"k-day-hover-active")}),h.addEventListener("mouseleave",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),0<daysToHover.length)for(var a=0;a<daysToHover.length;a++)x.hasClassName(daysToHover[a],f.dayActive)&&x.removeClassName(daysToHover[a],"k-day-hover-active")})),h.innerHTML=g[k],++k<7;);for(l=x.make("div",{class:f.days},i),k=0,b=[];"week"==m.mode?(k%7==0&&(u=x.make("div",{class:f.week+" clearfix"},l),b.push(u)),x.make("span",{},u)):b.push(x.make("span",{},l)),++k<42;);v.push({header:d,caption:o,days:b}),w&&x.make("div",{class:f.monthSeparator},y)}c.draw(),x.addEvent(y,"mousedown",function(e,t){var a;if(x.hasClassName(t,f.nextMonth))return c.disableNextMonth||!1===c.publish("view-changed",c,["next-month"])||(c.viewStartDate.add(1,"months"),c.draw()),!1;if(x.hasClassName(t,f.previousMonth))return c.disablePreviousMonth||!1===c.publish("view-changed",c,["previous-month"])||(c.viewStartDate.subtract(1,"months"),c.draw()),!1;if(x.hasClassName(t,f.nextYear))return c.disableNextYear||!1===c.publish("view-changed",c,["next-year"])||(c.viewStartDate.add(1,"years"),c.draw()),!1;if(x.hasClassName(t,f.previousYear))return c.disablePreviousMonth||!1===c.publish("view-changed",c,["previous-year"])||(c.viewStartDate.subtract(1,"years"),c.draw()),!1;if((x.hasClassName(t.parentNode,f.days)||x.hasClassName(t.parentNode,f.week))&&x.hasClassName(t,f.dayActive)&&(a=t.getAttribute("data-date"))){if(a=D(a,m.dayAttributeFormat).hours(12),!1!==c.publish("date-clicked",c,[a]))switch(m.mode){case"multiple":c.addSelected(a)||c.removeSelected(a);break;case"range":c.addSelected(a);break;case"week":c.weekSelected(a);break;case"single":default:c.addSelected(a)}return!1}if(x.hasClassName(t.parentNode,f.week)&&(a=t.getAttribute("data-date")))return a=D(a,m.dayAttributeFormat).hours(12),!1!==c.publish("date-clicked",c,[a])&&"week"==m.mode&&c.weekSelected(a),!1;if(x.hasClassName(t.parentNode,f.header)){if("multiple"==m.mode&&1==m.dayHeaderClickable){var s=x.hasClassName(t,f.daySelected),n=t.parentNode.parentNode.getAttribute("data-datestart"),i=t.getAttribute("data-day");1==s?c.monthDaySelected(n,i,!0):c.monthDaySelected(n,i,!1)}return!1}return!1}),(m.attachTo=x.$(m.attachTo))&&m.attachTo.appendChild(y)}};w.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,endDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,dayHeaderClickable:!1,format:null,subscribe:null,columnHeaderFormat:"dd",titleMonthFormat:"MMMM,",titleYearFormat:"YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:!0,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",captionMonth:"k-caption-month",captionYear:"k-caption-year",header:"k-header",days:"k-days",week:"k-week",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayInRangeStart:"k-range-start",dayInRangeEnd:"k-range-end",dayBlackout:"k-blackout",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(e){return D(e).startOf("day").yearDay()>=k()},"today-past":function(e){return D(e).startOf("day").yearDay()>k()},any:function(e){return!1},"today-future":function(e){return D(e).startOf("day").yearDay()<k()},future:function(e){return D(e).startOf("day").yearDay()<=k()}},getSelectedAsDates:function(){for(var e=[],t=0,a=this._sel.length;t<a;t++)e.push(this._sel[t].toDate());return e},getSelectedAsText:function(e){for(var t=[],a=0,s=this._sel.length;a<s;a++)t.push(this._sel[a].format(e||this.settings.format||"YYYY-MM-DD"));return t},getSelectedRaw:function(){for(var e=[],t=0,a=this._sel.length;t<a;t++)e.push(D(this._sel[t]));return e},getSelected:function(e){var t=this.getSelectedAsText(e);switch(this.settings.mode){case"week":case"range":return t.splice(2),t.join(this.settings.rangeDelimiter);case"multiple":return t.join(this.settings.multipleDelimiter);case"single":default:return t[0]||null}},isSelected:function(e){if((e=D(e).startOf("day").yearDay())<1||!this._sel||this._sel.length<1)return!1;switch(this.settings.mode){case"week":case"range":var t=this._sel[0]?this._sel[0].startOf("day").yearDay():0,a=this._sel[1]?this._sel[1].startOf("day").yearDay():0;return t===e||a===e?1:t&&a?(t<e&&e<a||t<a&&e<t&&a<e)&&-1:0;case"multiple":for(var s=this._sel.length;s--;)if(this._sel[s].startOf("day").yearDay()===e)return!0;return!1;case"single":default:return this._sel[0]&&this._sel[0].startOf("day").yearDay()===e}return!1},setSelected:function(e,t){var a,s=M(e,this.settings.parseSplitDelimiter,this.settings.format),n=M(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);for(a=n.length;a--;)this.removeSelected(n[a],!1);for(a=s.length;a--;)this.addSelected(s[a],!1);!1!==t&&(s[0]&&(this.viewStartDate=D(s[0],this.settings.format)),this.draw())},addSelected:function(e,t){if(e=D(e,this.settings.format).hours(12),this.endDate&&e.isAfter(this.endDate,"day"))return!1;switch(this.settings.dayOutOfMonthClickable&&"range"!==this.settings.mode&&this.makeSelectedDateVisible(e),this.settings.mode){case"multiple":if(this.isSelected(e))return!1;this._sel.push(e);break;case"range":1!==this._sel.length?this._sel=[e]:e.startOf("day").yearDay()>this._sel[0].startOf("day").yearDay()?this._sel[1]=e:this._sel=[e,this._sel[0]];break;case"single":default:this._sel=[e]}return this._sel.sort(function(e,t){return e.startOf("day").yearDay()-t.startOf("day").yearDay()}),this.publish("change",this,[e]),!1!==t&&this.draw(),!0},weekSelected:function(e){var t=e.toDate(),a=D(t).startOf("week"),s=D(t).endOf("week").subtract(1,"day");this._sel=[a,s],this.publish("change",this,[e.day()]),this.draw()},monthDaySelected:function(e,t,a){var s=D(e).startOf("month").weekday(t),n=D(e).endOf("month");for(selected=[];s<=n;)s>=D(e).startOf("month")&&!this.direction(s)&&(a?this.removeSelected(D(s).hours(12)):this.addSelected(D(s).hours(12))),s.add(7,"d")},makeSelectedDateVisible:function(e){var t=D(e).date("1").diff(this.viewStartDate,"months");t<0?this.viewStartDate.subtract(1,"months"):0<t&&t>=this.settings.months&&this.viewStartDate.add(1,"months")},removeSelected:function(e,t){e=D(e,this.settings.format).hours(12);for(var a=this._sel.length;a--;)if(this._sel[a].startOf("day").yearDay()===e.startOf("day").yearDay())return this._sel.splice(a,1),this.publish("change",this,[e]),!1!==t&&this.draw(),!0;return!1},removeAllSelected:function(e){for(var t=this._sel.length;t--;)if(this.removeSelected(this._sel[t],!1),0===t)return!1!==e&&this.draw(),!0;return!1},draw:function(){var e,t,a,s,n,i,r,o,d,l,u=D(this.viewStartDate).startOf("month").add(12,"hours"),h=this.classes,c=0,f=0,m=0,y=this.settings;n=this.calendars.length;do{(e=D(u).date(1)).day(e.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),(t=this.calendars[c]).header.parentNode.setAttribute("data-datestart",u.format(this.settings.dayAttributeFormat)),t.caption.querySelector(".k-caption-month").innerHTML=u.format(this.settings.titleMonthFormat),t.caption.querySelector(".k-caption-year").innerHTML=u.format(this.settings.titleYearFormat),o=[];for(var v=m=i=f=0;v<7;v++)x.removeClassName(t.header.children[v],h.daySelected),o[v]=0;for(;a="week"==y.mode?(f%7==0&&0!==f&&i++,t.days[i].childNodes[f%7]):t.days[f],s=[],(r=this.isSelected(e))&&s.push({"-1":h.dayInRange,1:h.daySelected,true:h.daySelected}[r]),"range"===y.mode&&(this._sel[0]&&this._sel[0].startOf("day").yearDay()===e.clone().startOf("day").yearDay()&&s.push(h.dayInRangeStart),this._sel[1]&&this._sel[1].startOf("day").yearDay()===e.clone().startOf("day").yearDay()&&s.push(h.dayInRangeEnd)),y.dayHeaderClickable&&"multiple"===y.mode&&(s.push("k-day-week-"+e.weekday()),1!=r&&1!=r||this.direction(e)||u.format("M")!=e.format("M")||(o[e.weekday()]=o[e.weekday()]+1)),e.month()!=u.month()?s.push(h.dayOutOfMonth):s.push(h.dayInMonth),(!(this.blackout(e)||this.direction(e)||this.endDate&&e.isAfter(this.endDate,"day")||e.month()!=u.month()&&!1===y.dayOutOfMonthClickable)||0<r)&&s.push(h.dayActive),this.blackout(e)&&s.push(h.dayBlackout),e.clone().startOf("day").yearDay()===k()&&s.push(h.dayToday),d=e.format(this.settings.dayAttributeFormat),y.dateClassMap[d]&&s.push(y.dateClassMap[d]),a.innerHTML=e.format(y.dayNumberFormat),a.className=s.join(" "),a.setAttribute("data-date",d),e.add(1,"days"),++f<42;);if((v=0)<o.length){do{if(0<o[v]){var p=w.moment(u).startOf("month").weekday(v),g=w.moment(u).startOf("month");for(endMonth=w.moment(u).endOf("month"),m=0;g<=p&&!this.direction(p)&&m++,p.add(7,"d"),p<=endMonth;);m==o[v]?x.addClassName(t.header.children[v],h.daySelected):x.removeClassName(t.header.children[v],h.daySelected)}}while(++v<o.length);y.endDate&&u.isSame(this.endDate,"month")?(this.disableNextMonth=!0,this.disableNextYear=!0,x.addClassName(this.container,h.disableNextMonth),x.addClassName(this.container,h.disableNextYear)):(this.disableNextMonth=!1,this.disableNextYear=!1,x.removeClassName(this.container,h.disableNextMonth),x.removeClassName(this.container,h.disableNextYear))}u.add(1,"months")}while(++c<n);if(y.directionScrolling){var b=D().startOf("month").hours(12);l=u.diff(b,"months",!0),"today-past"===y.direction||"past"===y.direction?l<0?(this.disableNextMonth=!1,x.removeClassName(this.container,h.disableNextMonth)):(this.disableNextMonth=!0,x.addClassName(this.container,h.disableNextMonth)):"today-future"!==y.direction&&"future"!==y.direction||(l>y.months?(this.disablePreviousMonth=!1,x.removeClassName(this.container,h.disablePreviousMonth)):(this.disablePreviousMonth=!0,x.addClassName(this.container,h.disablePreviousMonth))),"today-past"===y.direction||"past"===y.direction?l<=-11?(this.disableNextYear=!1,x.removeClassName(this.container,h.disableNextYear)):(this.disableNextYear=!0,x.addClassName(this.container,h.disableNextYear)):"today-future"!==y.direction&&"future"!==y.direction||(l>11+y.months?(this.disablePreviousYear=!1,x.removeClassName(this.container,h.disablePreviousYear)):(this.disablePreviousYear=!0,x.addClassName(this.container,h.disablePreviousYear)))}this.publish("draw-end",this)}};var M=function(e,t,a){var s=[];"string"==typeof e?e=e.split(t):x.isArray(e)||(e=[e]);for(var n,i=e.length,r=0;e[r]&&(n=D(e[r],a).hours(12)).isValid()&&s.push(n),++r<i;);return s},x=(window.Kalendae=w).util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},isTouchDevice:function(){return"ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints},$:function(e){return"string"==typeof e?document.getElementById(e):e},$$:function(e){return document.querySelectorAll(e)},make:function(e,t,a){var s,n=document.createElement(e);if(t)for(s in t)t.hasOwnProperty(s)&&n.setAttribute(s,t[s]);return a&&a.appendChild(n),n},isVisible:function(e){return 0<e.offsetWidth||0<e.offsetHeight},getStyle:function(e,t){var a,s;return e.currentStyle?a=e.currentStyle[t]:window.getComputedStyle&&(a=(s=window.getComputedStyle(e,null))?s[t]:""),a},domReady:function(e){var t=document.readyState;"complete"===t||"interactive"===t?e():setTimeout(function(){x.domReady(e)},9)},addEvent:function(s,e,n){function t(e){var t=(e=e||window.event).target||e.srcElement,a=n.apply(s,[e,t]);return!1===a&&(e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0)),a}return s.attachEvent?s.attachEvent("on"+e,t):"mousedown"===e&&x.isTouchDevice()?s.addEventListener("touchstart",t,!1):s.addEventListener(e,t,!1),t},removeEvent:function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener(t,a,!1)},fireEvent:function(e,t){if(document.createEvent){var a=document.createEvent("HTMLEvents");a.initEvent(t,!0,!0),e.dispatchEvent(a)}else document.createEventObject?e.fireEvent("on"+t):"function"==typeof e["on"+t]&&e["on"+t]()},hasClassName:function(e,t){if(!(e=x.$(e)))return!1;var a=e.className;return 0<a.length&&(a==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(a))},addClassName:function(e,t){(e=x.$(e))&&(x.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t))},removeClassName:function(e,t){(e=x.$(e))&&(e.className=x.trimString(e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")))},isFixed:function(e){do{if("fixed"===x.getStyle(e,"position"))return!0}while(e=e.offsetParent);return!1},scrollContainer:function(e){do{var t=x.getStyle(e,"overflow");if("auto"===t||"scroll"===t)return e}while((e=e.parentNode)&&e!=window.document.body);return null},getPosition:function(e,t){var a=e.offsetLeft,s=e.offsetTop,n={};if(!t)for(;e=e.offsetParent;)a+=e.offsetLeft,s+=e.offsetTop;return n[0]=n.left=a,n[1]=n.top=s,n},getHeight:function(e){return e.offsetHeight||e.scrollHeight},getWidth:function(e){return e.offsetWidth||e.scrollWidth},trimString:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){function e(e,t){if("object"==typeof t){for(var a in t)t.hasOwnProperty(a)&&(s&&"object"==typeof e[a]&&"object"==typeof t[a]?_update(e[a],t[a]):e[a]=t[a]);return e}}for(var s=!0===arguments[0],t={},a=s?1:0;a<arguments.length;a++)e(t,arguments[a]);return t},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)}};"function"==typeof document.addEventListener&&w.util.domReady(function(){for(var e,t,a,s=x.$$(".auto-kal"),n=s.length;n--;)t=null==(a=(e=s[n]).getAttribute("data-kal"))||""==a?{}:new Function("return {"+a+"};")(),"INPUT"===e.tagName?new w.Input(e,t):new w(x.merge(t,{attachTo:e}))}),w.Input=function(e,t){if("function"==typeof document.addEventListener||x.isIE8()){var a,s,n=this.input=x.$(e),i=!1;if(!n||"INPUT"!==n.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var r=this,o=r.classes,d=r.settings=x.merge(r.defaults,t);this._events={},d.attachTo=window.document.body,d.selected?a=!0:d.selected=n.value,w.call(r,d),d.closeButton&&(s=x.make("a",{class:o.closeButton},r.container),x.addEvent(s,"click",function(){n.blur()})),a&&(n.value=r.getSelected());var l=r.container,u=!1;l.style.display="none",x.addClassName(l,o.positioned),this._events.containerMouseDown=x.addEvent(l,"mousedown",function(e,t){u=!0}),this._events.documentMousedown=x.addEvent(window.document,"mousedown",function(e,t){u=!1}),this._events.inputFocus=x.addEvent(n,"focus",function(){i=!0,r.setSelected(this.value),i=!1,r.show()}),this._events.inputBlur=x.addEvent(n,"blur",function(){u&&x.isIE8()?(u=!1,n.focus()):r.hide()}),this._events.inputKeyup=x.addEvent(n,"keyup",function(e){i=!0;var t=M(this.value,r.settings.parseSplitDelimiter,r.settings.format);t&&t.length&&t[0]&&1e3<t[0].year()?r.setSelected(this.value):(r.setSelected("",null),r.viewStartDate=D(r.defaultView),r.draw()),i=!1});var h=x.scrollContainer(n);h&&x.addEvent(h,"scroll",function(e){n.blur()}),r.subscribe("change",function(){i||(n.value=r.getSelected(),x.fireEvent(n,"change"),d.closeOnSelection&&"single"===d.mode&&(n.blur(),r.hide()))})}},w.Input.prototype=x.merge(w.prototype,{defaults:x.merge(w.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:x.merge(w.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var e=this.container,t=e.style,a=this.input,s=x.getPosition(a),n=x.scrollContainer(a),i=n?n.scrollTop:0,r=n?n.scrollLeft:0,o=this.settings;switch(t.display="",o.side){case"left":t.left=s.left-x.getWidth(e)+o.offsetLeft-r+"px",t.top=s.top+o.offsetTop-i+"px";break;case"right":t.left=s.left+x.getWidth(a)-r+"px",t.top=s.top+o.offsetTop-i+"px";break;case"top":t.left=s.left+o.offsetLeft-r+"px",t.top=s.top-x.getHeight(e)+o.offsetTop-i+"px";break;case"bottom right":t.left=s.left-x.getWidth(e)+x.getWidth(a)+o.offsetLeft+"px",t.top=s.top+x.getHeight(a)+o.offsetTop-i+"px";break;case"bottom":default:t.left=s.left+o.offsetLeft-r+"px",t.top=s.top+x.getHeight(a)+o.offsetTop-i+"px"}t.position=x.isFixed(a)?"fixed":"absolute",this.publish("show",this)},hide:function(){this.container.style.display="none",this.publish("hide",this)},destroy:function(){var e=this.container,t=this.input;x.removeEvent(e,"mousedown",this._events.containerMousedown),x.removeEvent(window.document,"mousedown",this._events.documentMousedown),x.removeEvent(t,"focus",this._events.inputFocus),x.removeEvent(t,"blur",this._events.inputBlur),x.removeEvent(t,"keyup",this._events.inputKeyup),e.parentNode&&e.parentNode.removeChild(e)}});var C=function(e){var r=(e=e||this).c_||{};e.publish=function(e,t,a){for(var s,n=r[e],i=n?n.length:0;i--;)if("boolean"==typeof(s=n[i].apply(t,a||[])))return s},e.subscribe=function(e,t,a){return r[e]||(r[e]=[]),a?r[e].push(t):r[e].unshift(t),[e,t]},e.unsubscribe=function(e){for(var t=r[e[0]],a=e[1],s=t?t.length:0;s--;)t[s]===a&&t.splice(s,1)}};if(void 0!==D&&(w.moment=D),!w.moment){if(!window.moment)throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page.";w.moment=window.moment}return(D=w.moment).fn.yearDay=function(e){var t=Date.UTC(this._d.getFullYear(),this._d.getMonth(),this._d.getDate()),a=Math.floor(t/864e5);return void 0===e?a:this.add({d:e-a})},"undefined"==typeof jQuery||"function"!=typeof document.addEventListener&&!x.isIE8()||(jQuery.fn.kalendae=function(a){return this.each(function(e,t){"INPUT"===t.tagName?jQuery(t).data("kalendae",new w.Input(t,a)):jQuery(t).data("kalendae",new w(jQuery.extend({},{attachTo:t},a)))}),this}),w});
